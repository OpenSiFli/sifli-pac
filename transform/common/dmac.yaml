transforms:
  - !MakeFieldArray
      fieldsets: dmac::regs::Cselr\d
      from: c\ds
      to: cs

  # (CCR1, CNDTR1...) -> (Ccr, Cndtr...)
  - !MergeFieldsets
      from: dmac::regs::(C.*r)\d+
      to: dmac::regs::$1

  # (ccr1, ccr2...) -> (ccr[2]...)
  - !MakeRegisterArray
      blocks: dmac::Dmac
      from: (c.*r)\d+
      to: $1

  # GIF1, TCIF1...
  - !MakeFieldArray
      fieldsets: dmac::regs::Isr
      from: (gif|tcif|htif|teif)\d
      to: $1
  - !MakeFieldArray
      fieldsets: dmac::regs::Ifcr
      from: (cgif|ctcif|chtif|cteif)\d
      to: $1

  - !Add
      ir:
        enum/dmac::vals::Pl:
          bit_size: 2
          variants:
            - name: Low
              description: "Low priority"
              value: 0
            - name: Medium
              description: "Medium priority"
              value: 1
            - name: High
              description: "High priority"
              value: 2
            - name: VeryHigh
              description: "Very high priority"
              value: 3
        enum/dmac::vals::Size:
          bit_size: 2
          variants:
            - name: Bits8
              value: 0
            - name: Bits16
              value: 1
            - name: Bits32
              value: 2
        enum/dmac::vals::Dir:
          bit_size: 1
          variants:
            - name: PeripheralToMemory
              description: "Read from peripheral"
              value: 0
            - name: MemoryToPeripheral
              description: "Read from memory"
              value: 1

  - !ModifyFieldsEnum
      fieldset: dmac::regs::Ccr
      field: pl
      enum: dmac::vals::Pl
  - !ModifyFieldsEnum
      fieldset: dmac::regs::Ccr
      field: msize
      enum: dmac::vals::Size
  - !ModifyFieldsEnum
      fieldset: dmac::regs::Ccr
      field: psize
      enum: dmac::vals::Size
  - !ModifyFieldsEnum
      fieldset: dmac::regs::Ccr
      field: dir
      enum: dmac::vals::Dir